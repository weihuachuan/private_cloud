CREATE DATABASE IF NOT EXISTS hos
  DEFAULT CHARACTER SET UTF8
  COLLATE UTF8_GENERAL_CI;

USE hos;

--
-- Table structure for table `USER_INFO`
--
DROP TABLE IF EXISTS USER_INFO;

CREATE TABLE USER_INFO
(
  USER_ID     VARCHAR(32) NOT NULL,
  USER_NAME   VARCHAR(32) NOT NULL,
  PASSWORD    VARCHAR(64) NOT NULL
  COMMENT 'PASSWORD md5',
  SYSTEM_ROLE VARCHAR(32) NOT NULL
  COMMENT 'ADMIN OR USER',
  CREATE_TIME TIMESTAMP   NOT NULL DEFAULT CURRENT_TIMESTAMP,
  DETAIL      VARCHAR(256),
  PRIMARY KEY (USER_ID),
  UNIQUE KEY AK_UQ_USER_NAME (USER_NAME)
)
  ENGINE = InnoDB
  DEFAULT CHARSET = utf8
  COMMENT = '用户信息';

--
-- Table structure for table `TOKEN_INFO`
--

DROP TABLE IF EXISTS TOKEN_INFO;

CREATE TABLE TOKEN_INFO
(
  TOKEN        VARCHAR(32) NOT NULL,
  EXPIRE_TIME  INT(11)     NOT NULL,
  CREATE_TIME  TIMESTAMP   NOT NULL DEFAULT CURRENT_TIMESTAMP,
  REFRESH_TIME TIMESTAMP   NOT NULL,
  ACTIVE       TINYINT     NOT NULL,
  CREATOR      VARCHAR(32) NOT NULL,
  PRIMARY KEY (TOKEN)
)
  ENGINE = InnoDB
  DEFAULT CHARSET = utf8
  COMMENT = 'token 信息表';

--
-- Table structure for table `HOS_BUCKET`
--

DROP TABLE IF EXISTS HOS_BUCKET;

CREATE TABLE HOS_BUCKET (
  BUCKET_ID   VARCHAR(32),
  BUCKET_NAME VARCHAR(32),
  CREATE_TIME TIMESTAMP   NOT NULL DEFAULT CURRENT_TIMESTAMP,
  DETAIL      VARCHAR(256),
  CREATOR     VARCHAR(32) NOT NULL,
  UNIQUE KEY AK_KEY_BUCKET_NAME(BUCKET_NAME),
  PRIMARY KEY (BUCKET_ID)
)
  ENGINE = InnoDB
  DEFAULT CHARSET = utf8
  COMMENT = 'HOS BUCKET';

--
-- Table structure for table SERVICE_AUTH
--

DROP TABLE IF EXISTS SERVICE_AUTH;

CREATE TABLE SERVICE_AUTH
(
  BUCKET_NAME  VARCHAR(32) NOT NULL,
  TARGET_TOKEN VARCHAR(32) NOT NULL
  COMMENT '被授权对象token',
  AUTH_TIME    TIMESTAMP   NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (BUCKET_NAME, TARGET_TOKEN)
)
  ENGINE = InnoDB
  DEFAULT CHARSET = utf8
  COMMENT = '对象存储服务授权表';